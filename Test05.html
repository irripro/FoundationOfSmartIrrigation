<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chart.js Example</title>
  <!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.js" crossorigin="anonymous"></script>

  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
</head>
<body>
  <canvas id="myChart" width="400" height="400"></canvas>
  <script>
    // 示例数据点
const dataPoints = [
  { x: 10, y: 20, outFlow: 50, direction: 'right' },
  { x: 30, y: 40, outFlow: 60, direction: 'up' },
  { x: 50, y: 60, outFlow: 70, direction: 'left' },
  { x: 70, y: 80, outFlow: 80, direction: 'down' }
];

// 图表配置
const chartConfig = {
  type: 'line', // 或其他图表类型
  data: {
    datasets: [{
      label: 'Data Points',
      data: dataPoints.map(point => ({ x: point.x, y: point.y })),
      backgroundColor: 'rgba(75, 192, 192, 0.2)',
      borderColor: 'rgba(75, 192, 192, 1)',
      fill: false
    }]
  },
  options: {
    scales: {
      x: {
        type: 'linear',
        position: 'bottom'
      },
      y: {
        beginAtZero: true
      }
    },
    plugins: {
      tooltip: {
        callbacks: {
          label: (context) => {
            const dataPoint = dataPoints[context.dataIndex];
            return `x: ${dataPoint.x}, y: ${dataPoint.y}, 出流: ${dataPoint.outFlow}, 方向: ${dataPoint.direction}`;
          }
        }
      },
      annotation: {
                annotations: {
                    line1: {
                        adjustScaleRange: false,
                        drawTime: 'afterDraw',
                        display: true,
                        type: 'line',
                        // data: dataPoints.map(point => ({ x: point.x, y: point.y })),
                        xValue: dataPoints.x, // X 轴上的值
                        yValue: dataPoints.y,
                        x1: dataPoints.x+10, // Y 轴最小值
                        y1: dataPoints.y+10,// Y 轴最大值
                        borderColor: 'rgba(104,166,214,0.5)',
                        borderWidth: 2,
                        label: {
                            enabled: true,
                            content: 'Midpoint',
                            position: 'top'
                        }
                    }
                }
            }
    }
  }
};

// 获取 canvas 元素并创建图表
const ctx = document.getElementById('myChart').getContext('2d');
const myChart = new Chart(ctx, chartConfig);
  </script>

</body>
</html>